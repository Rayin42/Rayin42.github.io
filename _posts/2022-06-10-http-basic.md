---
layout: post
title: http 공부 정리 - 2. URI&웹브라우저 흐름
subtitle: 
categories: html
tags: [html, study]
---

## HTTP
Hyper Text Transfer Protocol
HTTP 메시지에 모든 것을 담아 전송할 수 있다

- HTML, TEXT
- IMAGE, 음성, 영상, 파일
- JSON, XML(API)
- 거의 모든 형태의 데이터
- 서버 간 데이터를 주고 받을 때도 대부분 HTTP 사용

### HTTP 역사
- HTTP/0.9 1991년 : GET 메서드, HTTP 헤더 X
- HTTP/1.0 1996년 : 메서드, 헤더 추가
- HTTP/1.1 1997년 : 가장 많이 사용, 가장 중요한 버전 (이후는 성능 개선 위주)
  - RFC2068(1997) -> RFC2616(1999 개정) ->RFC7230~7235(2015 개정)
  - RFC(Request for Comments) : 미국의 국제 인터넷 표준화기구인 IETF에서 제공, 관리하는 문서로 인터넷 개발에 있어 필요한 기술, 연구 결과, 절차 등을 기술해놓은 메모
- HTTP/2 2015년 : 성능 개선
- HTTP/3 진행중 : TCP 대신에 UDP 사용, 성능 개선
![](/img/http-protocol.JPG)
빨간색 부분의 h2, http/1.1 등이 http 버전 표기


### 기반 프로토콜
- TCP : HTTP/1.1, HTTP/2
- UDP : HTTP/3
- 현재 HTTP/1.1 주로 사용, 이후로는 성능개선 개념이라 1.1만 배워도 나름 익숙하게 사용할 수 있다! (2, 3 급속도로 퍼지고 있음)

### HTTP 특징
- 클라이언트 서버 구조
- 부상태 프로토콜(Stateless), 비연결성
- HTTP 메시지를 통해 통신
- 단순하며 확장 가능

### 클라이언트 서버 구조
클라이언트와 서버가 분리된 것이 중요!
- 비지니스 로직, 데이터 등을 서버에 몰아넣고 UI, 사용성 등을 클라이언트에 집중 가능
 -> 클라이언트와 서버가 독립적으로 진화할 수 있음

- Request Response 구조
- 클라이언트는 서버에 요청을 보내고 응답이 오는 것을 대기
- 이후 서버가 요청에 대한 결과를 만들어서 응답

### 무상태 프로토콜(Stateless)
Stateful(서버가 클라이언트의 이전 상태를 보존) vs Stateless

#### Stateful 예시
 - 고객 : 이 노트북 얼마인가요?
 - 점원 : 100만원입니다 (노트북 상태 유지)
 - 고객 : 2개 구매하겠습니다
 - 점원 : 200만원입니다. 신용카드, 현금 중 어떤걸로 하시겠습니까?(노트북, 2개 상태 유지)
 - 고객 : 신용카드로 구매하겠습니다
 - 점원 : 200만원 결제되었습니다 (노트북, 2개, 신용카드 상태 유지)

#### Stateful vs Stateless
- 상태 유지 : 중간에 다른 점원으로 바뀌면 안된다
 -> 점원이 바뀐다면 상태정보를 그 점원에게 미리 알려줘야한다
 -> 중간에 서버가 장애가 생기면 대처 불가
    - 예) 로그인 기능 (로그인한 사용자의 경우 로그인 했다는 상태를 서버에 유지)
      -> 일반적으로 브라우저 쿠키와 서버 세션들을 사용해 유지하며 상태유지는 최소한만 사용
- 무상태 : 중간에 점원이 바뀌어도 된다
 -> 갑자기 고객이 증가해도 점원을 대거 투입 가능
 -> 갑자기 클라이언트 요청이 증가해도 서버 증설 가능
 -> 무상태는 응답서버를 쉽게 바꿀 수 있다
    - 예) 로그인이 필요 없는 단순한 서비스 소개 화면 등..

- 모든 것을 Stateless로 할 수 있는 경우도 있고 불가능한 경우도 있다

#### Stateless 특징
- 서버가 클라이언트의 상태를 보존X
- 장점 : 서버 확장성 높음 (스케일 아웃 - 수평 확장 유리)
  -> 이벤트 등으로 인한 대용량 트래픽 (선착순 이벤트, 명절 교통편 예약, 수강신청 등)
- 단점 : 클라이언트가 추가 데이터 전송

### 비연결성
요청->응답 후 클라이언트와 서버의 TCP 연결을 종료
- HTTP는 기본이 연결을 유지하지 않는 모델
- 일반적으로 초 단위 이하의 빠른 속도로 응답
- 1시간동안 수천명이 서비스를 사용해도 실제 서버에서 동시에 처리하는 요청은 수십개 이하로 매우 적다
  -> 예) 웹 브라우저에서 연속해서 검색버튼을 누르지는 않는다
- 서버 자원을 매우 효율적으로 사용 가능

#### 비연결성의 한계
- TCP/IP 연결을 매번 새로 맺어야함 - 3 way handshake 시간 추가
- 웹브라우저로 사이트를 요청하면 HTML 뿐 아니라 자바스크립트, css, 추가 이미지 등 수많은 자원이 함께 다운로드됨
  -> 지금은 HTTP 지속연결(Persistent Connections)를 통해 문제 해결, HTTP/2와 HTTP/3에서 더 많은 최적화
  -> HTTP 지속연결 : 다수의 웹 객체가 하나의 TCP연결을 통해 클라이언트에게 전송하도록 TCP 연결을 유지하지만 일정 시간동안 사용하지 않으면 해제